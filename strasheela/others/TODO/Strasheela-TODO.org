#+CATEGORY: Strasheela

* Strasheela examples						    :STRASHEELA:


** TODO Create decatonic test chord progression				  :NEXT:

   Check chord progression CSPs I did for 31 ET and adapt them for
   22 ET with decatonic scales
   
*** Further ideas for rules 

    - Only decatonic chords
    - Strong chord progressions (Schoenberg rule)
    - ?? Finish with cadence (needs def what cadence is)
    - ?? Constrain chord identity with morphology constraints to roughly follow "orgiastic curve"

    - ?? resolve dissonances
    - ?? control degree of dissonances (e.g., either only gradually increasing and decreasing of dissonance or use of dissonance where [betonung] is needed)
    - ?? 'harmonic motifs': short chord sequences which are repetitions of previous sequences but on different degree (possibly even extending tonality..)


** 'Interesting arpeggio' example [[file:~/oz/music/Strasheela/private/examples/forOlleRomo/Arpeggio.oz][Arpeggio.oz]]				  :SOON:

   [?? Wait until I have prototype-based motif model -- he wants to
   shape duration and velo parameters with functions, I can do that
   with fenvs, but is this consistent with new motifs idea?]

  ?? Duration working time: 1d -- probably more :)

  an example for Olle Romo, see description in strasheeela support tracker
  
  https://sourceforge.net/tracker/index.php?func=detail&aid=1883452&group_id=167225&atid=842099
  
  
*** TODO Describe task in English, mentioning Strasheela techniques to use
*** Implement description


** Create small-scale musical example which demonstrates the effect of LUtils.cFilter and LUtils.cFind :NEXT:
   
*** TODO Sketch a small-scale music theory in plain English  

    Idea: modulation example: scale(s) related to each chord (and chords related to each note) are found with LUtils.cFilter/LUtils.cFind. 

    Alternative idea:  
    
    map(filter(getAllNotes(myScore), isOnStrongBeat), 
      f : f(n) := getPitchClass(n) \in getPitchClassSet(find(getChordProgression(myScore), 
							     g : g(c) := isSimultaneous(n, c))))

*** TODO Implement this theory

    see LUtils-test.oz for a LUtils.cFilter and LUtils.cFind test


*** More Info

    NOTE: this matter could make it into a publication (part of a publication)! 

    Related approach: find using filter + reified constraints as boolean tests is related but note the same. 

    However, even if boolean test would return true for some datum already, find blocks if reified constraint blocks on some element before. This new approach works even when I don't know in which order variables are determined and thus in which order elements are added to the stream. 

    Similar issue with filter: even with reified constraints as boolean tests, filter may block completely until enough information is available in all data. An concurrent filter would return data in a stream as soon as enough information is available on these data.
 
    Sufficient to have a filter which concurrently processes a list of objects. I only need to collect all data with collect (e.g., all data matching test function) and then do concurrent filter on this result list. 

    A method filterThreaded would further improve the application of delayed constraints where filtering tests used reified constraints 
    E.g., I could use a method filterThreaded for a better definition of getSimultaneousItems



** Muzak Beispiel mit Kilian						 :MAYBE:

   see 
   [[file:/Users/t/texte/CollaborationWithKilian/Muzaks/]]
   
*** TODO Recapitulate definition: how is resulting value seq organised
*** Port Lisp to Oz
*** Redefine as constraint 

** Josquin counterpoint example						 :MAYBE:

   See description at [[file:~/oz/music/Strasheela/private/examples/Josquin/PlanningAndThinking/JosquinCounterpoint-MusikTheorie.txt]]

** Schoenberg Harmony							 :MAYBE:

   See [[file:~/oz/music/Strasheela/private/examples/Schoenberg/PlanningAndThinking/SchoenbergHarmony.oz]]

** Inventio								 :MAYBE:

   See [[file:/Users/t/oz/music/Strasheela/private/examples/Inventio/]]


* Strasheela design						    :STRASHEELA:

** CSPs with soft constraints 						  :NEXT:
   
   How can I model soft constraints with the means available in Oz, e.g.,
   - reified constraints
   - best solution search (BAB)

*** Read literature on soft constraints					 :@READ:

**** TODO [#A] [50%] Read soft constraints article in "Handbook of Constraint Programming"
**** DONE Read Bartak soft constraints survey
     CLOSED: [2008-03-17 Mon 18:33]


**** Check further literature on weighted constraints

     Sharpiro, Haralick (1981). Structural descriptions and inexact matchings. IEEE Transactions Pattern Analysis Machine Intelligence, 3:504-519. 

     k-weighted constraints: J. Larrosa (2002). On arc and node consistency in weighted CSP. Proc of AAAI'02, pp. 48-53.  

     Search web ...

**** DONE Skim "Constraint Satisfaction with Preferences" 
     CLOSED: [2008-03-17 Mon 18:45]

@PHDTHESIS{Ru:thesis01,
        TITLE = {{Constraint Satisfaction with Preferences}},
        AUTHOR = "Hana Rudov{\'a}",
        SCHOOL = {Faculty of Informatics, Masaryk University},
        YEAR = 2001,
        OPTURL = "http://www.fi.muni.cz/~hanka/phd.html",
  OPTcomment = {survey on soft constraint approaches},
  OPTpath = {programming/constraints/Rudova-phd.pdf},
  OPTnote = 	 {},
  OPTannote = 	 {file InMyLib}
}



*** Weighted constraints for Strasheela

**** TODO Revise my idea sketch on paper 

     see folder "Strasheela: weighted constraints"

***** Question: should I better use generic framework (e.g., semiring-based soft constraints) instead of only specific case weighted constraints

      Counterargument: I can implement weighted constraints with FD ints, and I can transform all existing Strasheela constraints in soft weighted constraints with reification. Also, this will still work with GeOz
      For all other frameworks I need at least real interval constraints (and who is maintaining them..)


**** TODO Write dummy CSP with weighted constraints 

**** With the dummy example create abstractions for writing weighted constraint problems 

     E.g., 
     - How to easily collect and sum all weights (store sum FD int in info slot of top-level container, so comparison constraint of best solution search can easily access it?). 
     - "Dynamic" soft constraints: what is my formalism? Idea: proc (constraint) returning cost as last arg. Can be applied easily with all mapping funs (e.g., MapNeighbours) and results are then added
     - Soft variant of PercentTrue: returns cost how far constraint is violated
       - Other soft variant of PercentTrue: allow for range spec (Min#Max)
	 Less precise, but more simple (and more efficient -- no optimisation..)


** Markov chain constraints which include probablilty			  :WAIT:

   Wait for soft constraints support for Strasheela

*** Recapitulate my simple Markov chain constraint
    
    MarkovChain, MarkovChain_1
    [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/Pattern/Pattern.oz::proc%20MarkovChain%20Xs%20Decl][file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/Pattern/Pattern.oz::proc MarkovChain Xs Decl]]
    

*** TODO Extend/Edit definition using PercentTrue (as soft constraint)

    - Markov chain def 
      - For each clause in Markov chain
	- For each sublist of given list (sublist length depending on
	  order, 0th order: sublist length is 1)
	  - Apply reified constraint checking checking whether clause holds
      - Check probability with soft PercentTrue, return cost/penalty FD int
    - Return cost sum of all clauses: will be used for optimising with BAB 

    The following values are vars: input list, clauses (value sequences and percentages).
    Fixed: number of clauses and order.  
    So, this approach can be used for generation and [engeschraenkt] for analysis.
    ?? How can I make number of clauses constrainable? 
    
    ?? Use name MarkovChain for new constraint and give old defs
    MarkovChain, MarkovChain_1 a new name



** Add support for Real Interval constraints 

*** Install XRI on MBP 

**** TODO Contact developers on failed installation attempt		 :@MAIL:

    I tried to install XRI on MacOS 10.4, but the configure script failed. Below are the error messages (I filtered out all other messages). It appears the configure script somewhere hardwires the Mozart installation directory to /usr/lib/mozart and can therefore not find the Mozart installation on my system in /usr/local/oz. Setting OZHOME does not help. 



$ ./configure > configure.log
make: /usr/lib/mozart/bin/oztool: Command not found
make: /usr/lib/mozart/bin/oztool: Command not found
make: /usr/lib/mozart/bin/oztool: Command not found
make: /usr/lib/mozart/bin/oztool: Command not found
make: /usr/lib/mozart/bin/oztool: Command not found
make: /usr/lib/mozart/bin/oztool: Command not found
make: /usr/lib/mozart/bin/oztool: Command not found
In file included from ri.hh:39,
                 from propagators.hh:38,
                 from reified-prop.hh:38,
                 from reified-prop.cc:34:
misc.hh:42:25: error: mozart_cpi.hh: No such file or directory
In file included from ri.hh:39,
                 from propagators.hh:38,
                 from trig-prop.hh:38,
                 from trig-prop.cc:35:
misc.hh:42:25: error: mozart_cpi.hh: No such file or directory
In file included from ri.hh:39,
                 from propagators.hh:38,
                 from propagators.cc:35:
misc.hh:42:25: error: mozart_cpi.hh: No such file or directory
In file included from ri.hh:39,
                 from constraint.hh:39,
                 from constraint.cc:34:
misc.hh:42:25: error: mozart_cpi.hh: No such file or directory
In file included from ri.hh:39,
                 from ri.cc:36:
misc.hh:42:25: error: mozart_cpi.hh: No such file or directory
make: *** No rule to make target `ltmain.sh'.  Stop.
configure: error: ozinstall not found





*** Understand XRI 

**** TODO Read documentation and try examples

***** Understand whether/how I can define a relation between XRI variables and FD variables

      All I found was reflection (?) procedures like XRI.getUpperBound and XRI.getMidPoint, which return a corresponding float. I could then transform the float to a FD int. However, it appears XRI does not support any constraint which defines a direct relation (e.g., there is not constraint like {XRI.absRound XRI_var FD_var})


*** Generalise Strasheela distribution Strategy for possible XRI 

    XRI requires special distribution definitions. I somehow need to generalise the Strasheela distribution if parameter values should be either FD ints or XRI vars

    TODO: specify next actions


*** Define XRI temporal constraints

    Presently, the temporal constraints are only defined for FD int startTimes, durations etc.

    Possible generalisation: some flag (e.g., set in Init) specifies whether _all_ temporal variables are FD ints (the default) or XRI variables. The suitable constraints are then applied accordingly.
 

*** Generalise accessors used for output

    Accessor methods like getDurationInSeconds or getPitchInMidi must be generalised to support either FD ints or XRI vars


** DONE Introduce some generalised concept of 'cadence'		       :ARCHIVE:
   CLOSED: [2008-04-08 Tue 17:10]

   =======

   Example: {Cadence Chords Scale} constraints that union of all pitch classes in Chords (list of N chords) contains all pitchclasses of Scale. Additional arguments (some FD int?) may allow to specify whether cadence ends in I or some form of deceptive cadence occurs. 
   Combined with disallowing of weak harmonic steps with ProgressionStrength this should result in classical cadence (doublecheck ??)
 
   What generalised notions are there in the literature for a cadence?
   My problem: I would like to have a cadence concept which also works, e.g., for music in extended just intonation and is not simply something like II V I... I would like to structure [unconventional] music. Does this problem occur in literature? How do they do this in Jazz, for example?

*** DONE Check literature for cadence concepts
    CLOSED: [2008-04-08 Tue 17:10]

    Is there anything like a generalised concept proposed already

*** Define constraint 


    
** Introduce some generalised concept of resolution of dissonances

*** Extend chord music representation: which chord notes are dissonant?

**** DONE Edit default database: which pitch classes are dissonant?
     CLOSED: [2008-03-17 Mon 12:52]
     
**** TODO Extend chord music representation (as mixin)

     Chord representation similar to representation of chord pitch
     classes: dissoance PCs in database, transposed by transposition
     param

**** TODO Extend note music representation (as mixin)

     Constraint method isDissonantChordNote(PitchClass B): tests
     whether PitchClass (or scale degree?) is specified to be
     dissonant in related chord


*** TODO Define constraint {IsDissonanceR MyPitchClass B}

    Constraint needed to define rules of resolving dissonances: 

    NOT(isChordNote(MyPitchClass)) OR isDissonantChordNote(MyPitchClass)

    Where? In HS.rules?

*** TODO Define abstraction similar to {DissonanceResolvedR MyNote ResolveConditions} 

    For ideas cf. meth nonChordPCConditions(Conditions)
    [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/HarmonisedScore/source/Score.oz::meth%20nonChordPCConditions%20Conditions][file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/HarmonisedScore/source/Score.oz::meth nonChordPCConditions Conditions]]


**** Rule ideas for resolving dissonances

     Direct resolution: 

     Strict case: next melodic note has pitch class one
     semitone/wholetone below dissonant pitch class, which is consonant
     
     
     Less strict case: next melodic note has consonant pitch class which
     is at maximum a wholetone above or below the dissonant pitch class
     (also pitch repetition is permitted)

     Indirect resolution: 



** Introduce some abstraction for modulation
   
   NOTE: unfinished action list -- project postponed

*** Define constraints defining relations between chords and scales which result in expressing modulation
    
    Modulation expressed with chord sequence and sim sequence of scales which overlap

    ?? Overlapping scales: chords should use only pitches occuring in both scales

    After overlapping ends, new scale is clarified by some (form of) cadence

    Re-read Schoenberg on this matter

*** Think about other ways

   Are there other ways: using overlapping scale objects effectively results in CSP which constraints hierarchic structure

   


** Harmonic constraint ProgressionStrength			  :NEXT:ARCHIVE:

   see [[file:~/oz/music/Strasheela/tmp.oz::functor%20SchoenbergF][file:~/oz/music/Strasheela/tmp.oz::functor SchoenbergF]]

*** DONE Move definitions from Strasheela/tmp.oz into HS.rules 
    CLOSED: [2008-04-08 Tue 17:09]

    As subfunctor?

*** DONE Implement constraint for strong, weak and superstrong
    CLOSED: [2008-03-17 Mon 14:03]

    As reified constraints?

*** DONE Combine these constraints to single rating
    CLOSED: [2008-03-17 Mon 14:03]

    With reified constraints?

*** DONE Combine this single rating with secondary rating based on number of common pitch classes 
    CLOSED: [2008-03-17 Mon 14:04]

    
*** DONE Write test suite for testing all constraints 
    CLOSED: [2008-04-08 Tue 17:37]

    Missing is only ResolveDescendingProgressions

    [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/HarmonisedScore/testing/Rules-test.oz::TODO%20ResolveDescendingProgressions][file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/HarmonisedScore/testing/Rules-test.oz::TODO ResolveDescendingProgressions]]

*** TODO Implement Schoenbergs orig defs				 :MAYBE:

    Based on root PC intervals 

*** DONE Create example(s)
    CLOSED: [2008-04-08 Tue 17:09]
*** DONE Create Documentation 						  
    CLOSED: [2008-04-08 Tue 17:10]



** Morphology analysis constraints					  :NEXT:

   see  [[file:~/oz/music/Strasheela/private/WorkInProgress/Morphology/Morphology.oz]]

*** 'whole FD numbers' (i.e. support of neg numbers)

**** TODO Integrate 'whole FD numbers' into Strasheela 
     
     ?? As contribution into contribution/anders?

**** TODO [50%] Test all constraints of functor Whole 

     See [[file:~/oz/music/Strasheela/private/WorkInProgress/Morphology/WholeNumbers.oz::functor%20WholeF][file:~/oz/music/Strasheela/private/WorkInProgress/Morphology/WholeNumbers.oz::functor WholeF]]


*** TODO Finish implementation: NewOld_Analysis as constraint 

    (deterministic implementation first?)

*** Energy profile

*** Extend: add support of FD lists as values for constrast constraint
    
    Map sequence of integers into single integer 
    (see [[file:~/oz/music/Strasheela/private/WorkInProgress/Morphology/Morphology.oz]])

*** Understand how they apply Morphology analysis to motif sequence (Sec Thematic construction)
    
     file:///Users/t/texte/variousDocs-and-Articles/music_etc/PRISMA/PRISMA-2004/PaoloAralla_Morph.An./index.html

     file:/Users/t/texte/variousDocs-and-Articles/music_etc/PRISMA/Prisma-Jan2007/Jacopo/ 

*** Integrate into Strasheela 

    Where? Subfunctor of functor Pattern?

*** Create example(s)
*** Create Documentation						  :@NET:

    Can I somewhere point to literature for further details? 

    Lit cited by Paolo Aralla: 
    - Baboni Schilingi, Jacopo and Voisin Frederic. 1997. Morphologie et structures musicales in Morphologie, Reference Manual. Paris: IRCAM.


*** Extend: dirrent input sequence elements are of different importance

    Example: Melody: some notes are longer or on stronger beat and therefore more important. 
    Can I somehow grade the importance of sequence elements (e.g., with some factor per element?)?

**** TODO Brainstorm: ideas to express this			



** New prototype-based motif model					  :NEXT:

   see [[file:~/oz/music/Strasheela/private/WorkInProgress/Motifs-Again/Ideas.org]]
   und GTD folder 

*** TODO Brainstorming fuer mini language

    see handgeschriebene Notizen in GTD folder "Motif model: prototype based"

*** TODO Brainstorming fuer constraints between motif instances 
    
*** TODO Formalisieren der Ideen 


** Time curves etc [[file:~/oz/music/Strasheela/private/examples/forOlleRomo/TempoCurves-etc.oz][TempoCurves-etc.oz]]					  :NEXT:

   [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/examples/ContinuousControllersInScore-MidiOutput.oz]]
   [[file:~/oz/music/Strasheela/private/examples/forOlleRomo/TempoCurves-etc.oz]]
   [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/Fenv/Fenv.oz]]
   
   Old Goal (unrealistic): user can freely define tempo curve and time shift curve for any temporal container in score 
   
   New reduced goal: user can freely define a single global tempo curve (possibly defining segments locally) and nested time shift functions for any temporal container in score 
   I feel the building blocks are now there, but there are examples to do

*** DONE ?? concatenate tempo curve fenvs with associated start and end times in seconds
    CLOSED: [2008-02-20 Wed 10:30]

*** TODO Create example with single global tempo curve fenv

    Example partly done at [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/examples/ContinuousControllersInScore-MidiOutput.oz::][ContinuousControllersInScore-MidiOutput.oz]], Example 5, 
    but it still has bugs.
    
*** TODO Create example with nested local time shift fenvs
    First create abstraction to access and combine local time shift fenvs

*** TODO Create example with a global tempo curve derived from consecutive local tempo curves

*** ?? Create tempo canon example

*** Means to archive score with fenvs 

    Transform with toInitRecord and then pickle with Score.saveScore




** Soft contour constraint

   Idea: most intervals follow given contour, but not all. Combines
   Contour and PercentTrue (percentage specified as range)

   Applications: 

   - Contour of melody follows simple shape in general (e.g. first ascending then
     decending), but there are exceptions

     -> I got this idea while listening to some non-Western music..

     Option: additionally, the overall direction of the melody is
     constrained by constraining specific intervals (e.g. between
     first and last pitch)

*** TODO Define constraint InpreciseContour (name?)
*** Define example (see above)


** Edit chord, scale and interval database (22 pitches per octave)

    [[file:~/oz/music/Strasheela/private/0-privateContributions/ET22/source/DB.oz::functor]]

*** Better understand decatonic scales					  :NEXT:

**** TODO Analyse their intervals (incl JI interpretations)

     See decatonic scales GTD folder: emails by Erlich with ratios,
     his article with picts showing scales as periodicity block etc

**** TODO Understand which chords can be formed on which degree

     I can do CSP for this: find all consonant decatonic chords
     possible on degree X

**** TODO Understand close decatonic [regions]: what would be the septimal equivalent of mediants


*** Chord database

**** TODO Manually add harmonicity measurements				  :EASY:

     %% Howto get harmonicity measurements from Scala
%%
%        create scale (chord/intervals are also scales) from ratios in Scale (e.g., with new or edit scale), then do 
%        SHOW DATA
%
%        extract the interesting numbers from the printout, e.g., 
%        Euler's gradus suavitatis, Vogel's harmonic complexity, Sum of Tenney's harmonic distance, Wilson's harmonic complexity, Sum of Mann's harmonic distance
%
%        alternative for single intervals:
%        SHOW/ATTRIBUTE pitch <pitch>
%        Show the value of all attributes for the given pitch (regardless of scale context)
%
%        for single intervals I also wrote a litte script for showing a few measurements
%        /Applications/Scala/T_Harmonicity.cmd
%       
%        NOTE: these values can only be computed from ratios! 

**** TODO Add feature 'dissonance'

     extend music representation etc accordingly

**** TODO Add feature 'required' (pitch classes)

     Otherwise, chord DB entries are redundant

     ?? extend music representation etc accordingly

     Quick solution before I have this extension: restrict to chord indices with max number of pitches (e.g., no triads which are contained in tetrads)

**** TODO Add feature 'otonal/utonal'
**** TODO ?? Add silent roots (e.g., 5:6:7 and 6:7:9 both have silent root 4)

**** TODO decide: shall I combine siblings which only differ in root into single chord: constraining chord index, e.g., with Morphology constraints may make more sense then. 

**** Verify chords

     Note: look particularly for chord pairs on pict by Dave Keenan -- do they indeed only differ in root 


***** TODO Study lily output for all chords

      common music notation with 22 ET accidentals, ratios, and chord name

      see [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/ET22/testing/DB-test.oz::Traverse%20all%20chords%20in%20database%20create%20a%20score%20whose%20notes%20express%20it%20and%20output%20Lilypond%20Csound][file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/ET22/testing/DB-test.oz::Traverse all chords in database create a score whose notes express it and output Lilypond Csound]]

***** TODO listen: all consonant?
      

**** TODO Search for further chords					 :MAYBE:


**** TODO Extract remaining chords from hexad on picts by Dave Keenan (GTD folder "decatonic scales") :MAYBE:
     

*** Scale database							 :MAYBE:


**** ?? Extend scale database						 :MAYBE:

     There are many other scales in Scala which fit into 22 ET

     
*** Create Midi output for 22 ET					  :NEXT:

**** TODO For my Kontakt scripting

**** TODO General MIDI out hack

     Use 16 MIDI channel, add pitch bend value for each note (assuming 2 semitone range up and down), voice stealing: oldest note.
     Note: this is a hack which does not always work (oldest note may still be sounding!). But it is a useful hack, and if added to Tutorial then users can adapt it at need.



*** Different Temperaments 

**** TODO Create list with advantages / disadvantages of the different temperaments suggested for the decatonic scales
    
     Re-read the emails, check which basic intervals (3, 5, 7-limit)
     are how well represented (read cent figures in Scala and listen
     to intervals and chords)

     Don't decide for a temperament at this stage. Instead, I better
     make temperament easy to change. Then I can later just try
     different temperaments and decide which I like most. I might even
     use different temperaments for different sections


*** Extend simple decatonic test theory of harmony			  :WAIT:

    First finish DB and get preliminary examples running

**** TODO Understand the advantages of each decatonic scale 

**** Create extended 'decatonic tonality'

     What is septimal correspondant of mediant chords..?

     Shall I in (the beginning?) handle "wendepunkte" as adviced by Schoenberg?

**** Create modulation with 'decatonic tonality'


*** Create little melodies						  :WAIT:

    Wait until databases and first test are created.

**** Melodic rules

     - ?? Restrict melodic intervals
     - Over given chord, all chord pitches are permitted and all non-chord pitches if they are resolved (step-wise progression)  
       Better form for this??
     - ?? Constrain pitch (class) sequence with morphology constraints (constrain contour of morphology analysis to roughly follow "orgiastic curve")
       

**** Melody using motifs (over chord progression)

     For now monophonic melody (with simple accompaniment?), later polyphonic setting, e.g., harmonic counterpoint

     Either use my motif model or (more simple?) sub-CSPs (extended
     scripts), e.g., with algo comp technique like L-ystems.

     Example rules for motifs:

     - restrict melodic contour (only tendency? with something like PercentTrue_Range)
     - restrict rhythm to something recognisable (i.e. motif instances are recognised)
       Again, do this 'soft'. E.g., specify startTime (relative to motif start) and duration of important notes, without specifying the position of this note (i.e. number of notes can vary). Or specify the start time (relative to motif start) of local pitch maxima (again, number of notes can vary).

     - ?? Use timing curve to create 'interpretation' (create variants for different motifs)

	




** Edit chord, scale and interval database (31 pitches per octave)	 :MAYBE:

   See [[file:~/oz/music/Strasheela/private/0-privateContributions/ET31/source/DB.oz::Internally%20database%20entries%20are%20often%20defined%20by%20ratios%20using%20notation%20X%20Y%20for%20X%20Y%20to%20make%20them%20more%20comprehensible%20and%20portable%20to%20other%20temperaments%20Alternatively%20chords%20and%20scales%20are%20notated%20with%20conventional%20symbolic%20note%20names%20see%20function%20PC%20In%20any%20case%20the%20databases%20focus%20on%20chords%20scales%20and%20intervals%20which%20are%20close%20to%20just%20intonation%20in%2031%20ET][file:~/oz/music/Strasheela/private/0-privateContributions/ET31/source/DB.oz]]
   and [[file:ET31/music-sketches/ChordTest.oz][file:~/oz/music/Strasheela/private/CompositionPlans/ET31/music-sketches/ChordTest.oz]]

*** Add harmonic complexity / dissonance degree info

    Use Scala software to get information about [dissonance degree] 
    There are different measurements available (Vogler, Tenney?, Barlow?): use multiple in extra DB features? 

**** TODO Manually add harmonicity measurements to all DB entries 

%% Howto get harmonicity measurements from Scala
%%
%        create scale (chord/intervals are also scales) from ratios in Scale (e.g., with new or edit scale), then do 
%        SHOW DATA
%
%        extract the interesting numbers from the printout, e.g., 
%        Euler's gradus suavitatis, Vogel's harmonic complexity, Sum of Tenney's harmonic distance, Wilson's harmonic complexity, Sum of Mann's harmonic distance
%
%        alternative for single intervals:
%        SHOW/ATTRIBUTE pitch <pitch>
%        Show the value of all attributes for the given pitch (regardless of scale context)
%
%        for single intervals I also wrote a litte script for showing a few measurements
%        /Applications/Scala/T_Harmonicity.cmd
%       
%        NOTE: these values can only be computed from ratios! 


***** chord / scale (works for intervals too)

      create scale/chord from ratios in Scale (e.g., with new or edit scale), then do 
      SHOW DATA

      extract the interesting numbers from the printout, e.g., 
      Euler's gradus suavitatis, Vogel's harmonic complexity, Sum of Tenney's harmonic distance, Wilson's harmonic complexity, Sum of Mann's harmonic distance    
      
      NOTE: these values can only be computed from ratios! 

***** Single interval

      First step: I wrote a litte script for showing a few measurements
      [[file:/Applications/Scala/T_Harmonicity.cmd::Creates%20new%20scale%20from%20user%20input%20and%20returns%20harmonicity%20measurements][file:/Applications/Scala/T_Harmonicity.cmd::Creates new scale from user input and returns harmonicity measurements]]

      Alternative:

      Show/Attribute pitch <pitch>
      Show the value of all attributes for the given pitch (regardless of scale context)

      Does something similar for chords/scales exist?
      
***** Info

      Add this info to DB, so I later know..  

****** Transform ET scale into just scale

       harmonicity calculations require JI ratios, not an ET scale... 

       Note: this operation takes long time. 

	 Approximate [LIMIT]

       Hm, this completely changes the scale, probably a less good idea.
       Instead, for every interval (chord/scale), I could do the approximation myself (already in ET31 database..), and then use these data for my queries

****** Display interval info

       First, change attribute displayed with commands like SHOW. See possible values below

	 set attribute <VALUE>

       Then display values, e.g.,

	 Show
	 Show/Attribute : Only displays attribute

       Note: only works for JI ratios, not 31 ET


       Values (http://www.xs4all.nl/~huygensf/scala/help.htm#SET): 
       - GRADUS: the Gradus Suavitatis of Euler 
       - HARMON: the Barlow harmonicity value 
       - INV_HARMON: the absolute reciprocal of Barlow's harmonicity value
       - VOGEL: the Vogel harmonic complexity value
       - TENNEY: the Tenney harmonic distance value: log(num*den) 
       - WILSON: the Wilson harmonic complexity value (sum of primes except 2)
       - PERRY: the Perry harmonic complexity value 
	 ... 

	 There are various remarks in doc on these..

****** Display scale info

       Show data

       Again, works for JI scale, not ET




*** Add additional chords 

**** Play around with Scala clavier to find additional chords 

***** TODO Find further septimal chords


**** Check Scala chord database: which chords fit into 31 ET

     I feel I did this already..


**** Re-check written info on chords in articles in [meinen Unterlagen] 

     I feel this is mostly done already


*** Add scales suitable for chords which go beyond 5-limit (not simply diatonic scales)
    
    If I want to use melodic steps, then I likely must use non-harmonic notes. However, then I must introduce scales (so the non-harmonic notes are not arbitrary). These scales must match the chords. 

**** DONE Get info: how can I construct suitable scales for given set of chords :ARCHIVE:
     CLOSED: [2008-04-07 Mon 18:45]

    Possible approaches (see new menu in Scale): create Euler-Fokker genus (lattice), create Fokker periodicity block, create poly chordal scale, create combination product set ...  

    Use lattrice player for evaluating, testing, thinking about...



**** TODO Scale: After creating 31 ET scale check available scales (modes)

     Evaluate these scales for 7-limit harmony. Even if they are inverior to Erlich's decatonic scales, consider using them in a restricted way where scales change all the time togethere with the chords. 

     There are e.g. the following scales 

     - Octatonic
     - Lumma Decatonic
     - Hahn symmetric pentachordal
     - Hahn pentachordal

     Note that these scales are inverior to Erlich's decatonic scales

     - Melodically less convincing
     - Harmonically less flexible
       Less consonant intervals and chords are available 
       Example: 
       - In Erlich's scale there are 8 usable chords with same key pattern (2 not usable)
       - Lumma Decatonic: only 4 5th, 5 3rds (diatonically speaking)
       - Hahn summ pentachordal: 4 5th, 4 3th
       - Hahn pentachordal: 5 5th
       - Octatonic: 6 kl 3th


*** TODO Edit/Doublecheck the naming of chords, scales, and intervals

    Use Scala as a reference 

    Make names short enough that they are [eindeutig] in 31 ET

*** TODO Add abbrevations as alternative naming scheme			 :MAYBE:

    Edit HS.db.getChordIndex and friends accordingly

*** Add additional diatonic scales 					 :MAYBE:


** Score transformation

   see [[file:~/oz/music/Strasheela/private/WorkInProgress/ScoreTransformation/ScoreTransformation.oz]]
   and [[file:~/oz/music/Strasheela/private/WorkInProgress/ScoreTransformation/testing/ScoreTransformation-test.oz]]

*** TODO Reread/Revise already existing code 

*** Check todo section in source and test file for further step(s)

   see [[file:~/oz/music/Strasheela/private/WorkInProgress/ScoreTransformation/ScoreTransformation.oz]]
   and [[file:~/oz/musi


** Complement existing general variable and value orderings for Strasheela :NEXT:

   strasheela source 
    [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/source/ScoreDistribution.oz::order]]

*** TODO Check literature for variable and value orderings 

    van Beek in Constraint Handbook

    Bessiere and Regin article

    etc

*** TODO Double-check Mozart source

    Mozart distro source
    [[file:~/oz/mozart/trunk/mozart/share/lib/cp/FD.oz::Generic%20only][file:~/oz/mozart/trunk/mozart/share/lib/cp/FD.oz::Generic only]]


** Idea: user-guided search process: preserve already satisfying sections in output :WAIT:

   [wait until prototype-based motif model is realised]

   When composing, I have to listen to much solutions. Some parts of a solution might satisfy already, so I might want to keep that part and then get further results. How can I formalise this for easy use? 
   
*** Approach sketched

    CSP defined by extended script. One optional script arg expects function which creates a score. This score is 'unified' with solution. (if no arg was given, this unification is skipped) 

    Whenever we have a solution where we like some parts, we save (archive) the init record. In this textual representation we mark the bits we like (manual editing: add specific info tags to single elements or containers). For a more flexible approach, different marks might be introduced (use the mini language of the prototype-based motif model). For example, we might apply constraints directly to single score objects (e.g., this note should be highest pitch) 

    Some function (to define) expects this annotated score and creates reduced score spec whose score topology is exactly as the solution, constraints according to mini language are applied (typically, only marked parameters are determined, every other parameter is unconstrained).
   For convenience, this function might expect the path of the archive score file (*.ssco file) whose def in the included with an \include statement. 

   Parts which are marked in the input are again marked in the solution (so they have not to be marked again). 

   Later, this approach might be complemented by a GUI score interface (e.g., using PWConstraints score editor) for marking score parts to keep.

**** Mini language for marking score objects 

     See mini language for prototype-based motif model. It should be the same mini language.

**** Explanation why extra arg for extended script: 
     
     I need script definition where I can specify a partically determined solution. I already have that somehow. Script always returns solution and it usually contains some texual spec. However, I cannot use solution arg as input (its an object containing vars, I cannot have vars defined outside script), and within script the music representation is often created in stages. So, I need an additional arg which expects a function which returns partially determined score object. This score and the solution are then 'unified' (using my score unification via the textual representation. NOTE: things where these scores might differ including the info tag might be left out).  
   


define CSP which expects its solution score in textual form. 

archive init record. 

   

*** TODO Create simple example which uses this approach 

*** Create abstractions needed for this approach 

**** TODO Mini-language implementation	

     Expects an annotated score object (textual representation) and returns score object constrained according to the mini language

     -> Use implementation of mini language for prototype-based motif model
     

**** TODO Define function expecting a path with a *.ssco file and returning a nullary function which returns score where only the marked bits are determined / constrained

     


** Update Lilypond output						  :NEXT:

*** DONE Create clause for multiple voices in single staff
    CLOSED: [2008-04-08 Tue 22:54]

    Test for sim which contains only seq, which in turn contain only notes or lily chords
   
    If seqs in sim, and there are further higher-level containers, only notes and sims expressing chords (i.e. sim expresses muliple voices in single staff), and the seqs contain only notes (needed condition?),
    then separate multiple seqs with // as in 

    <<
       { a4 g2 f4~ f4 } \\
       { r4 g4 f2 f4 }
     >>

     Note: having a slash too much at the end does not hurt..

    http://lilypond.org/doc/v2.11/Documentation/user/lilypond-learning/Single-staff-polyphony#Single-staff-polyphony

*** TODO Check what OffsetToPauses does

    SeqToLily and SimToLily claim that offsets are ignored, but they use function OffsetToPauses..

*** DONE Update version tag to "2.10.0"
    CLOSED: [2008-04-06 Sun 20:58]

*** DONE Remove OuterSimBound
    CLOSED: [2008-04-06 Sun 23:55]

*** DONE Only outmost sequential container creates a staff
    CLOSED: [2008-04-06 Sun 23:30]

    NB: Upmost sim container does _not_ always create staffs  

    Revise: each top-level sequential creates a staff. Top-level here means a sequential container which has no direct or indirect temporal container which is a sequential container 

    Use decide clef! 

    -----

    Note: in typical Lily-suitable score topology, a sim is top-level container and its items are seq containers corresponding to the instruments 
    If top-level is a seq, then there is only a single staff. However, I can always explicitly create staffs in subcontainers (when then last for a short time only)



*** DONE Create clause for chords
    CLOSED: [2008-04-06 Sun 23:54]
    
    do test: if sim and only notes of same start and end time are contained: then print chord (almost equivalent to single note in notation: only single stem, common ties etc)

    Remove corresponding code section in SimToLily


*** DONE Disable call of convert-ly
    CLOSED: [2008-04-06 Sun 21:00]


*** Old todo for Lilypond output 

    Lilypond export outputs only rather old version. Meanwhile, Lilypond handles nested scores (quasi sim/seq containers) better than old version, but behaviour of old version is pertained when using Lily's conversion script. So, I should update my Lily output to a more Lily syntax version




**** TODO Create SVN branch

**** Understand what format Strasheela presently outputs and compare with recent Lily doc

***** TODO Decide for target Lilypond version 

      There are presently only few Strasheela users, so I might ask/force them all to switch to the latest Lilypond development version.

****** Ueberlegung

     Are there the syntax differences between Lily 2.10 (stable) and Lily 2.11 (development)?

     The output of convert-ly indicates that there have been changes in the syntax in version 2.11. 

> convert-ly -e out2-1.ly
convert-ly (GNU LilyPond) 2.11.43
Processing `out2-1.ly'... 
Applying conversion: 2.5.0, 2.5.1, 2.5.2, 2.5.3, 2.5.12, 2.5.13, 2.5.17, 2.5.18, 2.5.21, 2.5.25, 2.6.0, 2.7.0, 2.7.1, 2.7.2, 2.7.4, 2.7.6, 2.7.10, 2.7.11, 2.7.12, 2.7.13, 2.7.14, 2.7.15, 2.7.22, 2.7.24, 2.7.28, 2.7.29, 2.7.30, 2.7.31, 2.7.32, 2.7.32, 2.7.36, 2.7.40, 2.9.4, 2.9.6, 2.9.9, 2.9.11, 2.9.13, 2.9.16, 2.9.19, 2.10.0, 2.11.2, 2.11.5, 2.11.6, 2.11.10, 2.11.11, 2.11.13, 2.11.15, 2.11.23, 2.11.35, 2.11.38


***** TODO Compare current Strasheela output and desired output 

      - Create relatively complex nested Strasheela determined score: sim(seq(sim(note+)+)+)
      - Create one old format output with Out.outputLilypond and one new format output (using convert-ly -e on a copy of the output)
      - Simplify convert-ly output (Lilypond then reduces the number of staffs) -- but keep/enter explicit sim/seq nesting in Lily output
      - Compare orig Strasheela output and new format with diff
      - Adjust Strasheela lilypond output generation accordingly

***** With the new version test the following cases
****** Hierarchic nesting (sim and seq containers)
****** Note object output
****** ?? Chord output 
****** My extensions


** Efficiency
   
*** [#A] check out performance with adaptive recomputation		  :NEXT:

  Adaptive recomputation is highly recommended by Schulte, so I should possibly do this before investigating other approaches to improve efficiency (memory and run time)    

  *Note: in a few first tests with Explorer and IOzsef I could not see any effect of recomputation on the memory consumption. What am I missing?* 
  
**** Check out: where is adaptive recomputation implemented ready for use: only in IOzSeF? 

***** TODO Check Oz documentation, index Virtual Manual (wiki), mailing list archive :@NET:

***** TODO Ask Oz mailing list: where is adaptive recomputation implemented ready for use: only in IOzSeF? :@NET:
      
      CC to Guido? 


**** Create benchmark suite of musical CSPs which require special score distribution strategies 

     see [[file:~/texte/0-Publications/Publications-TODO.org::*Create%20benchmark%20suite%20of%20musical%20CSPs%20which%20require%20special%20score%20distribution%20strategies][file:~/texte/0-Publications/Publications-TODO.org::*Create benchmark suite of musical CSPs which require special score distribution strategies]]




# <<ScoreOutsideScript>> 
*** [#A] Does score outside script/space save memory. If so, define abstractions/templates for having the score outside the script

    First carefully evaluated what I can gain from recomputation and adaptive recomputation. Only if I feel it is necessary, I will then further improve memory (also a bit runtime) efficiency by having (most data of) the music representation stored in the top-level space only

See ../../testing/zy_Efficiency/KeepMusicRepresentationOutsideComputationalSpace.oz 

**** Measure how the different approaches differ in the amout of memory (and time) comsumed by copying.

 Approaches:

  - !! Measure total amount of memory and time required by search (e.g. put each script in an application of its own, call plain solver and measure time and memory with UNIX tools such as time and ...)
    -> which UNIX tool measures memory consumption of a call?

  - !!?? Measure with Oz profiler:
    problem: the memory/time comsumption of copying seems not to show if I just compile CSP with profiling information.
    Alternative option: temporarily, compile whole Mozart with profiling and check memory consumption of space copying proc (results will be very hard to read in this case!) 


**** _if_ I found out that memory reduction can be significantly reduced by defining the music representation outside the script/space, then I have to develop abstractions/templates for the following cases (it will be more complex than having the score inside the script, but it shouldn't be too hard..).


  - distribution strategies
  - implicit constraints
  - expressive rule applications 


**** split Strasheela in two parts: the part to define CSPs and the part to solve them. The solver part uses a very [speichersparende] representation based on records instead of classes and objects (i.e. I need to define/port the data abstraction interface required for distribution strategies). 

     -> I did some profiling to better understand this issue (see Strasheela/texting/profiling.oz)
     
       - Memory requirement of Strasheela mainly caused by elaborated data structure: there is so much explicitly represented. A more efficient data representation for the search would dump all information not required by the CSP: this is a very difficult task!!

         -> BTW: the memory difference between a record-based and an OOP based data structure appears to be neclegtable


***** The Solver 'the server'
     
      - The solver expects a CSP spec which specifies the music representation (with a unique ID for each variable) and a list of constraints which specify which variables are constrained by which constraint (aux variables also supported by the constraint spec).
      Also distribution strategy defined by spec.

      - This solver then creates the search script from the CSP spec 
     
      - This solver is much more efficient than current Strasheela: much less copying because much smaller data structure

      - The solver would be even more efficient if it could apply batch recomputation: wait for Geoz..
  
***** The second part of Strasheela (the 'client') defines the CSP specs: the present Strasheela could be modified to do this. It is even possible, that the present Strasheela could be modified such that it either does the search directly itself or alternatively creates this CSP spec (this option could be useful for prototyping and also helps to keep the present application a running program ..).

     - The CSP def part of Strasheela could/would mirror _every_ propagator defined by Oz. All constraints in a Strasheela program would be replaced my its Strasheela substitute. With a global switch (init variable/cell?) the user could decide whether the Strasheela constraint substitutes either just apply the orig Oz constraint or otherwise 'record' this constraint call for the CSP spec by denoting the name of the constraint and the unique IDs of all its argument vars 

       !! -> How to access the ID when the constraint gets the variable directly?? I would need to rewrite all Strasheela programs such that every Strasheela constraint substitute always expects parameter objects instead of variables!

***** Instead with this Strasheela 'client', other CAC applications could also create CSP specs and call the Strasheela 'server' (e.g. PWGL)



** Support for alternate tunings					  :NEXT:

*** TODO Define pair of (internally stateful) procs like {Init.setTuningTable Table} and {Init.getTuningTable ?Table}

*** TODO Modify getPitchInMidi to use tuning table if one is set

*** Provide Scala scale format support 

**** TODO Write Parser for Scala scale format

     Format is rather simple -- easy to write a parser

     Format description 
     http://www.xs4all.nl/~huygensf/scala/scl_format.html

     First support only scales specified in cent with a period

     Then add support for ratios (simply compute cent value for given ratio using MUtils function)


**** TODO Transform data of Scala scale file into a tuning table (pitch int to pitch float in cents measurement)

     Note that 1/1 (0 cent) is implicit and not specified. I must add it to beginning of list of pitches. 

     How is a periodic tuning spec repeated? I assume this is rather simple: for first period (preiod commonly octave) take the orig scale pitches, for the second period add the period (e.g., 1200 cent) to these pitches, for the third period add 2 * the period etc.
 

     Example: pajara TOP tuning 
     [[file:/Applications/Scala/scl/erlich_paj3.scl::Applications%20Scala%20scl%20erlich_paj3%20scl][file:/Applications/Scala/scl/erlich_paj3.scl::Applications Scala scl erlich_paj3 scl]]


     When loading a scala file, a warning a shown if the present number of notes per octave and the number of scale notes does conflict


*** Define some simple tuning table generation functions 

**** TODO Define transformation of a tuning spec for an octave to a full tuning table by octave transpositions
     
**** TODO Define program for creating regular temperaments, expecting generator and period intervals

     Generator and Period are cent values

     G is generator
     P is period
     N \in 1..max_N
     M \in 1..max_M

     Pitch_i = (G*N) - (P*M) 

     Total number of pitches N*M


     -------

     Python code (Generator and Period are cent values)
     !! implements different formula


     scale = []
     for nSteps in range(stepsPerPeriod):
     root = (nSteps*generator)%period
     for repeat in range(periodsPerOctave):
     scale.append(period*repeat + root)
     scale.sort()
     
     It assumes the generator and period are specified in cents. 
     It also assumes periodsPerOctave is given. If you don't 
     have that you can still get a tuning table for one period.
     
     sorted([(n*generator)%period
     for n in range(stepsPerPeriod)])
     
     You always have to choose the number of steps you want. You 
     may also like the period to be include in the table
     
     sorted([(n*generator)%period
     for n in range(stepsPerPeriod)])+[period]


     

     ------

     See email replies "[tuning] Re: Algorithm for 'unfolding' regular temperaments" in my action folder for details

***** DONE [#B] Ask tuning mailing list for regular temperament algorithm
      CLOSED: [2008-04-07 Mon 22:14]

      Guess: rank two regular temperament: 
      By adding the GENRATOR repeatedly, namely SIZE times, that number of pitches is obtained. These pitches are then again transposed by the PERIOD (commonly 1200 cent) 
     

*** ?? TODO Predefine some full tuning tables for easy access 

    Meantone

    Pajara: some variants

    More when I need them (or on request..)  

    Some TOP temperaments.. More in the Erlich paper
    http://xenharmonic.wikispaces.com/Regular+Temperaments

*** Info

**** Overview

     My harmony model supports equi-distant divisions of the octave. By keeping this as is, I can introduce the idea of alternate tunings for the playback. Nevertheless, pitches (and pitch classes etc) are still represented by FD ints, but these ints are used as indices into a tuning table for playback. 

     Application examples: play music with 12 pitches per octave in meantone, play music with 22 pitches per octave using some pajara temperament (e.g., TOP tuning). 

     Note: the definition of the music theory must possibly be modified (e.g., only particular keys are useful in meantone). 


**** Tuning table definition

     I have to decide for either format

***** Format 1: similar to Scala scale format

      Tuning table is a tuple with floats which map note pitches (integers) to pitches measured in cent (MIDI floats). 

      For simplicity, only a single period is defined (typically one octave). Additional tuning table features are the 'size' (int: number of pitches) and the 'period' (a float, MIDI cent) -- which is also the last pitch in the tuning table

      The mapping for arbitrary pitches are accessed by the following formula

      Octave = Pitch div TuningTable.size
      PC = Pitch mod TuningTable.size 
      TuningTable.PC + Octave * TuningTable.period


***** Format 2: Full tuning table

      Tuning table: Tuning specification format: a tuple with floats which map note pitches (integers) to pitches measured in cent (MIDI floats). There is an entry for all possible pitches. 

      Such a tuning table is either created by hand, or by some program. Examples: 
      - Transformation of a tuning spec for an octave to a full tuning table by octave transpositions
      - Program for regular temperaments, expecting generator and period intervals
      - Program parsing and processing Scala files (see below)


**** Tuning table use

***** Possibly: Use directly, e.g., in a custom-made Csound output proc

***** More effective: modify getPitchInMidi to use tuning table

****** Defining static tuning table

       A static tuning table is settable/accessible by pair of (internally stateful) procs like {Init.setTuningTable Table} and {Init.getTuningTable ?Table}. Defaults to nil, in which case getPitchInMidi calculates pitch as before. Otherwise, user-defined tuning-table is used.


****** ?? Changing tuning table on-the-fly

       getPitchInMidi expects optional arg tuning table, so tuning can be changed on-the-fly

       Note: for changing tunings on-the-fly I should somehow put tuning tables in score and these tuning tables should be used by output 


**** Scale scale support						 :MAYBE:

     Idea: method getPitchInMidi gets couterpart getPitchInMidi_Tempered where the pitch spec depends on a *.scl file, whose path is either given to some proc in Init, or (for changing the tuning on the fly) to the method getPitchInMidi_Tempered directly.  

     getPitchInMidi_Tempered uses some record which contains the pitches for all pitches (some upper limit?). I may also always compute pitches on the fly -- if the computation does not depend on computing other pitches first...
     This record is created by evaluating the scala file (first parsing it, then ...).
     
     If HS pitches per octave and spec in Scala file disagree, then ... 

***** Program more simple temperament support (at first) 

      - Tuning values are entered by hand (no parsing of Scala file)
      - Tuning values are all cents
      - However, octave may be \= 1200 cent, and temperament shifts tuning by corresponding (reduced/streched) octave for computing any pitch



** Reconsider automatic releases					 :MAYBE:

   I would like to speed up my release process (so I would release Strasheela more often)

   The only tools for automating this I found so far are freshmeat-submit and shipper
   http://catb.org/~esr/software.html
   
   Plus: I may release info on more sites than now (ibiblio)
   Downside: somewhat targeted towards Linux apps and RPM packages, no support for sourceforge upload
   
   Note: Installation seems to work out of the box on a Mac.

*** Search whether other tools are available for this 

    
*** ?? Contact Eric Raymond: ask whether his software shipper meanwhile supports SourceForge as a destination

    His doc at 
    http://www.catb.org/~esr/shipper/shipper.html
    says "In the future, we hope to support (for example) Debian packages as deliverables and SourceForge as a destination." 

    Don't contact him -- there is no hint anywere that shipper meanwhile supports SourceForge in the (brief) list of changes. 

    Eric S. Raymond <esr@thyrsus.com>


* Strasheela documentation					    :STRASHEELA:

** Strasheela tutorial

*** Strasheela tutorial: do music constraint programming 'chapter'

*** Email Tobias Kunze: CM CSS verwendet



* Strasheela Bugs

** ScoreInspector hangs on determined FS vars

   More specifically, a newly created Inspector object without any further
   configuration hangs on inspecting determined FS variables, whereas other values and undetermined FS variables work fine. 

declare
InspectorObject = {Inspector.new unit}

%% hangs
{InspectorObject inspect({FS.value.make [1 2 3]})}

%% works fine
{InspectorObject inspect({FS.var.decl})}
{InspectorObject inspect(foo)}


  It seems this is only a problem on Mac OS, On Mar 12, 2008, at 4:31
  PM, Robert Van Dam reported on users@mozart-oz.org that the problem
  above works fine on Linux.

*** TODO Check: which platform is affected

    Is this only a MacOS issue?
    

*** Check whether I can fix problem of Inspector.new itself without too much hassle 

    [[file:~/oz/mozart/trunk/mozart/share/tools/inspector/InspectorMain.oz::fun%20NewInspector%20Options][file:~/oz/mozart/trunk/mozart/share/tools/inspector/InspectorMain.oz::fun NewInspector Options]]

*** Check whether I can/should configure default inspector instead of creating a new object

    [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/ScoreInspector/ScoreInspector.oz::proc%20ApplyMyConfiguration%20MyInspector][file:~/oz/music/Strasheela/strasheela/trunk/strasheela/contributions/anders/ScoreInspector/ScoreInspector.oz::proc ApplyMyConfiguration MyInspector]]


*** Decide whether costomised Inspector should be Strasheela default

    If not, then adopt OZRC templates and Tutorial accordingly.



* Collecting new ideas

** Lesen XMG literature							 :@READ:



* General Oz todo							    :OZ:

** OzUnit								  :SOON:

   file://Users/t/oz/Collozeum/collozeum/OzUnit/

*** Test all error cases -- most are done already

*** DONE Understand higher-level functionality: how to process a whole test suite etc. 
    CLOSED: [2008-02-20 Wed 19:30]

*** TODO Create documentation, using my tests

    use ozh, as usual..

    Mention critic: timeout cases wait for specified time..


    --------

    Copy form email: 

    On Apr 6, 2007, at 8:26 AM, Juergen Stuber wrote:
    
    Hi Torsten, hi Gal,
 
    <snip>
    
    Actually I think (from experience with Java unit tests in
    industry) that there should be something better than wait in real
    time for a timeout when testing concurrent programs.  The timeouts
    slow down the tests a lot, and the outcome is nondeterministic
    (e.g. tests run fine for the developer, but fail in a complete
    system build).
    
    I'd like a meta-interpreter which can provoke all the nasty races
    deterministically and test that they are handled correctly, and
    run as quickly as possibly by simulating the passage of time.  But
    that would be a very big project.
    
    Jrgen
    
    -- 
    Jrgen Stuber <juergen@jstuber.net>
    

*** Create abstraction which simplifies use

    only specifies list of test suites and gets results, statistics etc are created implicitly 

    two cases: if test suites are either specified directly (as I did in test file) or as a functor
    
*** ?? possibly an application called on the shell wrote with this abstraction

*** ?? Create working test suite for OzUnit  itself

*** Upload to Collozeum 

**** Contact Juergen Stueber and ask for permission

     juergen@jstuber.net

**** Upload via SVN 
**** Inform Oz mailing list

     Also, ask whether this is a suitable means for writing tests for the standard lib


** Collozeum

*** Collozeum: make projects available at Mogul

*** ozcurl/ozjs TODO: add ozmake makefile 				 :MAYBE:


** OPI:  

*** Emacs TAGS for Oz and Strasheela					 :MAYBE:

    Better wait for Code navigation tool from Wolfgang Meyer

    this does already work in principle, but I need 'to prefix' the functor variable before each TAGS entry
    
    [[file:~/oz/music/Strasheela/strasheela/trunk/strasheela/scripts/generate-TAGS.sh::fun%20Foo%20Foo56%201566][file:~/oz/music/Strasheela/strasheela/trunk/strasheela/scripts/generate-TAGS.sh::fun Foo Foo56 1566]]







